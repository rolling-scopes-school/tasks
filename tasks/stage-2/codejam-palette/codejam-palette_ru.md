| Срок исполнения | Имя папки | Название филиала |
| ----------- | ------------- | ------------- |
| 11.11.2019 23:59 | палитра | Codejam-палитра |


# Codejam Palette

## Задача

Ваша задача - реализовать инструменты для рисования (карандаш, заливка, подборщик цветов) с функциями, описанными ниже. Также вам необходимо сохранить текущий сеанс пользователя и восстановить его после перезагрузки страницы. Код должен быть проверен с помощью инструмента `eslint`. В задаче есть дополнительные задания, которые должна быть выполнены после реализации основного функционала.

### UX прототип
Вот файл, который нужно открыть в редакторе figma - ./data/codejam-palette.fig

Онлайн-версия - https://www.figma.com/proto/anAQsgXvKyEgijDvhZD7pJ/codejam-palette?node-id=0%3A1&scaling=min-zoom

Редактор палитры состоит из следующих блоков:
* Блок инструментов с различными инструментами, которые можно применить к canvas.
* Область палитры с кнопкой текущего цвета, кнопкой предыдущего цвета и набором предопределенных цветов
* Элемент холста размером 512 x 512 пикселей с полем 4x4. Размер одного элемента поля составляет 512/4 = 128 пикселей. Все рисование будет происходить на этом поле. Вы также можете использовать поле 16x16 или 32x32.
* компонент меню с заголовком codejam - это просто статический html без функциональности

### Canvas
Canvas должен отображать матрицу 4 * 4 на элементе dom размером 512 * 512 пикселей и применять инструменты к матрице 4 x 4.

### Tools

Страница должна начинаться с выбранным инструментом "карандаш".

Текущий выбранный инструмент должен иметь статус активного на пользовательском интерфейсе (измененный фон).

Общее поведение инструмента:
* пользователь выбирает инструмент, щелкая левой кнопкой мыши на значке
* инструмент должен быть выделен на панели с инструментами
* пользователь может применить инструмент к холсту
  * заполнить холст инструментом заливки
  * рисовать пиксели с помощью карандаша
  * выберите цвет с помощью палитры цветов

#### Инструмент "Заливка"

Инструмент «Заливка» при нажатии должен закрасить весь холст текущим выбранным цветом.

Чтобы заработать дополнительные баллы, вам, как разработчику, необходимо реализовать заливку текущим цветом внутри замкнутой области.

![Пример от Sonic](https://cdn.discordapp.com/attachments/642271813870551040/642438943832539197/unknown.png).

Только левая нижняя область должна быть заполнена.

#### Карандаш

Если пользователь нажимает левую кнопку мыши, карандаш должен нарисовать пиксель под текущей позицией мыши.

  [Пример видео от @Sonic](https://cdn.discordapp.com/attachments/642271813870551040/642349595875344403/Screencast_2019-11-08.mp4)

#### Палитра цветов

Компонент выбора цвета содержит текущий, предыдущий и предопределенный цвета для использования с инструментами "заливка" и "карандаш".

Пользователь должен иметь возможность выбрать цвет по:

- нажав на текущий цвет и используя функцию ввода цвета
- нажав на один из предопределенных цветов (красный или синий)
- выбрав инструмент выбора цвета и нажав на любой пиксель на холсте (или даже на странице)

Кнопка Prev color должна содержать информацию о предыдущем состоянии кнопки текущего цвета. Если пользователь нажмет на кнопку «Prev color» - его цвет станет текущим.


### Горячие клавиши

Вам как разработчику необходимо активировать (выбрать) инструмент нажатием кнопки клавиатуры:

- `b` выбрать инструмент **b**ucket
- `p` выбрать инстурмент **p**encil
- `c` активировать **c**olor picker

### Сеанс пользователя
Пользователь должен иметь возможность обновлять страницу и видеть предыдущий контент холста. Эта функция должна быть реализована с помощью localStorage API.

### Нефункциональные требования

#### eslint
`eslint` должен быть настроен

- `eslint` включен в` package.json`,
- вы должны использовать конфигурацию `eslint-config-airbnb-base`
- весь код должен быть проверен
- проверка eslint выполняется `npm run lint`

#### Ограничения
- должен работать в Chrome
- Использование material design или bootstrap допускается
- Вы НЕ МОЖЕТЕ использовать какие-либо фреймворки, такие как Angular / React / Vue
- Вы можете использовать препроцессоры
- Вы можете общаться, переписываться в чате, гуглить и использовать stackoverflow
- Вы можете использовать lodash.js

### How to deliver

Файлы js и css должны находиться в папке с именем «palette»("codejam-palette" также подойдет). Вы можете организовать код внутри папки, как вы хотите.

- создать ветку git
- создать папку
- Создайте HTML-файл с основным макетом и CSS-стилями для него. Или просто скопируйте ваш html с codejam-canvas
- Реализовать базовую функциональность для управления холстом
  - Инициализация холста
  - Заливка
- Установите текущий цвет
- Добавьте инструмент "fill"
- Добавьте инструмент "pencil"
- Реализуйте инструмент "color picker"
- Фиксируйте (use commit) ваш код, в процессе реализации функций, то есть:
  1. пустой html файл
  2. базовый макет css
  3. макет для canvas
  4. и т.д.
- Если у вас есть время, начинайте работать над Extra scope
- Рефакторинг и измененение кода до истечения срока.

Наставник может оставлять комментарии во время обзора, и вы, будучи студентом, можете решить проблемы и добиться более высокой оценки.

## Требования к коммитам, PR и репозиторию

[Общие требования из stage 2](https://github.com/rolling-scopes-school/docs/blob/master/ru/stage2-tasks-requirements.md).

## Оценка

Максимальный балл - **120**

### Базовый набор:

- [ ] **+10** - функциональность инструмента "pencil"
- [ ] **+10** - функциональность инструмента "fill bucket"
- [ ] **+20** - функциональность инструмента "color picker"
- [ ] **+10** - управление с клавиатуры: можно выбрать инструмент с помощью сочетаний клавиш
- [ ] **+20** - локальное хранилище: сохранить текущее состояние приложения, чтобы восстановить его после перезагрузки страницы.

Итого: **70**

### Дополнительный набор (включая всё из базового)

- [ ] **+10** - инструмент заливки заливает замкнутую область, а не весь холст
- [ ] **+20** - карандаш реализован с помощью линейного алгоритма Брезенхэма

- [ ] **+10** - `eslint` настроен
- [ ] **+10** - реализован как минимум 1 модульный тест (с использованием `jest` или `mocha`) и его можно запустить с помощью `test npm`.

Итого: **50**

### Штрафы

- Требования к коммитам, репозиторию и PR не выполнены - до **-20**
- Нет индикации для текущего выбранного инструмента до - до **-10**

## Дополнительная информация
- Ожидаемое время выполнения - 4 - 8 часов без дополнительного набора
- Ввод цвета - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/color
- Проект: редактор Pixel art - https://eloquentjavascript.net/19_paint.html
- Видео с рисованием на canvas - https://www.youtube.com/watch?v=8ZGAzJ0drl0&feature=youtu.be
- Local storage - https://tproger.ru/articles/localstorage/
- Local storage on mdn - https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
- настройка eslint - https://youtu.be/ofJdXbf11w0?list=PLe--kalBDwjj81fKdWlvpLsizajSAK-lh&t=171
- настройка jest - https://github.com/davojta/2019q1-base-project-bootstrap/commits/add-unit-tests
- видео по настройке jest - https://youtu.be/OyMf8ZlUfW8?list=PLe--kalBDwjj81fKdWlvpLsizajSAK-lh&t=438

* Темы: dom, canvas, localStorage, алгоритмы, unit tests, lint

## Благодарность
* @abyss-soft для обзора и предложения улучшений для этой задачи!
* @Sonic за помощь со схемой заливки и видео-демо.
