## js30-media-hints.md
Советы по выполнению 1-3 части задания js-30:
- [eco-sounds](js30-1.md)
- [audio-player](js30-2.md)
- [custom-video](js30-3.md)

1. [Добавление звука на веб-страницу](#добавление-звука-на-веб-страницу)
2. [Объединение проигрывания и остановки звука в одной функции. Флаги](#объединение-проигрывания-и-остановки-звука-в-одной-функции-флаги)
3. [Объединение кнопок проигрывания и остановки звука в одну](#объединение-кнопок-проигрывания-и-остановки-звука-в-одну)
4. [Метод `classList`](#метод-classlist)
5. [Треки можно пролистывать кликами по кнопкам](#треки-можно-пролистывать-кликами-по-кнопкам)
6. [Материалы про кастомный аудиоплеер](#материалы-про-кастомный-аудиоплеер)
7. [Добавление видео на веб-страницу](#добавление-видео-на-веб-страницу)


### Добавление звука на веб-страницу
С появлением HTML5 добавление аудиоплеера на страницу превратилось в рядовую задачу. Для этого достаточно в html-файл добавить код плеера, и в атрибуте `src` указать ссылку на аудио-файл.
```html
<audio src="" controls></audio>
```
[Пример 1 на codepen](https://codepen.io/irinainina/pen/poerqar)

Насмотря на простоту добавления, у встроенного в браузер аудиоплеера есть недостатки.  
Внешний вид встроенного в браузер аудиоплеера в разных браузерах выглядит немного по-разному и очень плохо стилизуется.  
Если нужно создать плеер с определённым дизайном, в приведённом выше коде необходимо убрать атрибут `controls`, который отвечает за отображение плеера и написать js-код для его проигрывания:  
```js
const audio = document.querySelector('audio');
function playAudio() {
  audio.currentTime = 0;
  audio.play();
}
function pauseAudio() {
  audio.pause();
}
```
[Пример 2 на codepen](https://codepen.io/irinainina/pen/RwoKVBW)

Функции `playAudio()` и `pauseAudio()` достаточно простые. Первая запускает проигрывание плеера используя метод `play()`, вторая - останавливает проигрывание, используя метод `pause()`. Строка `audio.currentTime = 0` указывает, что аудиотрек при каждом запуске функции `playAudio()` будет проигрываться с начала.

Есть возможность создать плеер средствами JavaScript:
```js
const audio = new Audio();

function playAudio() {
  audio.src = // ссылка на аудио-файл;
  audio.currentTime = 0;
  audio.play();
}
```
[Пример 3 на codepen](https://codepen.io/irinainina/pen/dyvzrNV)

### Объединение проигрывания и остановки звука в одной функции. Флаги
У большинства плееров используется одна кнопка для проигрывания и остановки воспроизведения. Если звука нет, клик по ней запускает проигрывание звука, если звук есть - останавливает. Это юзер-френдли - пользователю так удобнее. 

Чтобы реализовать такую возможность, нам необходимо объединить функции `playAudio()` и `pauseAudio()` в одну. Для создания такой функции нам прежде всего необходимо выяснить, играет ли в данный момент музыка. Для этого в глобальной области видимости, там, где находим элементы DOM, создадим переменную `isPlay`.

Такие переменные, названия которых начинаются с `is`, называются флагами. Флаг может принимать только два значения: `true` или `false`. С помощью флагов проверяем наличие или отсутствие чего-либо. В данном случае проверяем проигрывание в данный момент звука.

Когда мы только открываем страницу, звука нет. Поэтому переменную `isPlay` создаём с значением `false`:  
```js
let isPlay = false;
```  
При клике по кнопке `Play audio` необходимо не только запустить проигрывание звука, но и изменить значение переменной, указав, что теперь `isPlay = true`.  
При клике по кнопке `Stop audio` останавливаем проигрывание звука и указываем, что `isPlay = false`.

Зная, когда у нас проигрывается звук, а когда нет, можем создать видоизменённую функцию `playAudio()` которая будет по-разному работать в зависимости от того, проигрывается ли в данный момент звук. Если звука нет `if(!isPlay)`, запускаем проигрывание, иначе - останавливаем. Такую функцию вам предстоит написать самостоятельно.

### Объединение кнопок проигрывания и остановки звука в одну
Теперь, когда у нас есть одна функция, которая умеет и проигрывать, и останавливать звук, в плеере достаточно оставить только одну кнопку для запуска данной функции. Наша задача научиться менять внешний вид кнопки в зависимости от того, проигрывается в данный момент звук или нет.

Возможность изменения стиля элемента средствами JavaScript применяем только если нет других вариантов изменить стиль, например, если его значение получаем динамически в результате выполнения js-кода. Для всех остальных случаев используем JavaScript для добавления или удаления у элемента класса, для которого в css-коде прописан нужный стиль.

В css-коде создаём класс `pause` для которого фоновым изображением указываем иконку остановки звука. Для того, чтобы на кнопке проигрывания и остановки звука иконка проигрывания менялась на иконку остановки, нам необходимо добавлять кнопке класс `pause`, когда звук воспроизводится, и убирать, когда звука нет. Для этого используем метод `classList`.

### Метод `classList`
Метод `classList` предназначен для работы с классами и поддерживается всеми современными браузерами:
- `element.classList.add('class');` - добавляет элементу класс;
- `element.classList.remove('class');` - удаляет класс;
- `element.classList.toggle('class');` - переключает класс: добавляет, если класса нет, и удаляет, если он есть.
- `element.classList.contains('class');` - проверяет, есть ли данный класс у элемента (возвращает `true` или `false`)

Обратите внимание. Так как метод `classList` работает только с классами, то в кавычках внутри может находиться только название класса. И вот перед этим названием класса **точка не ставится никогда**. Эту ошибку часто совершают начинающие разработчики.

Для изменения стиля кнопки при клике удобно использовать метод `classList.toggle();`
```js
function toggleBtn() {
  button.classList.toggle('pause');
}
button.addEventListener('click', toggleBtn);
```
[Пример на codepen](https://codepen.io/irinainina/pen/NWpwdMe)

Простая логика переключения класса при клике усложняется тем, что кроме кнопки `play` есть ещё кнопки `play-next` и `play-prev`, при клике по которым тоже воспроизводится музыка. Функцию для переключения класса `pause` пишем по той же логике, по которой написали видоизменённую функцию `playAudio()` - проверяем состояние флага `isPlay` и в зависимости от этого добавляем или удаляем у кнопки класс `pause` при помощи методов `classList.add()`, и `classList.remove()`

### Треки можно пролистывать кликами по кнопкам
Создадим глобальную переменную `playNum`. Присвоим ей значение `0`, так как вначале проигрывания воспроизводится первый трек. Создадим две функции `playNext()` и `playPrev()`, которые изменяют значение переменной `playNum`, увеличивая или уменьшая его. Внутри функций `playNext()` и `playPrev()` вызываем функцию `playAudio()`, которая будет проигрывать соответствующий трек. Создадим массив, в который добавим список треков для воспроизведения, и при кликам по кнопкам будем переходить к следующему или предыдущему треку. Чтобы треки пролистывались по кругу, добавим условие: если значение переменной `playNum` меньше нуля, переходим к последнему треку массива и указываем `playNum` его индекс; если значение переменной `playNum` больше длины массива, переходим к треку с индексом 0 и указываем `playNum` индекс 0. 


### Материалы про кастомный аудиоплеер

В создании кастомного аудиоплеера могут помочь материалы:
- Статья [Создание настраиваемого HTML5 Audio Player](https://webdesign.tutsplus.com/ru/tutorials/create-a-customized-html5-audio-player--webdesign-7081) (статья немного устарела, jQuery, который в ней используется, в проектах курса использовть запрещено)
- [Custom Audio Player](https://codepen.io/EmNudge/pen/rRbLJQ) на codepen - умение разбираться в чужом коде и преобразовать его под свои требования - ценный и полезный навых, а codepen - отличный источник такого кода

### Добавление видео на веб-страницу

С появлением HTML5 добавление видео на страницу стало рядовой задачей. Код видеоплеера, реализованного только при помощи `html`  
```html
<video src="assets/video/video.mp4" poster="assets/video/poster.jpg" controls></video>
```  
Стандартный видеоплеер браузера имеет те же недостатки, что и встроенный в браузер аудиоплеер: по-разному выглядит в разных браузерах и очень плохо стилизуется.  
Добавление кастомного видеоплеера реализуется при помощи JavaScript.

Есть отличное видео по стилизации видеоплеера [Custom HTML5 Video Player](https://youtu.be/yx-HYerClEA) - 25 минут  
[Код кастомного плеера на codepen](https://codepen.io/antoinelouis/pen/VryabX)

Из приведённого примера нам понадобится только часть функционала: 
- кнопка Play/Pause
- прогрессбар
- регулятор громкости звука
- кнопка Volume/Mute, позволяющая включить и отключить звук

Также понадобится небольшое усовершенствование предложенного функционала: разный цвет прогрессбара и регулятора громкости звука до и после ползунка, которые верстаются при помощи элемента `input type="range"`.  
[Пример стилизации ползунка](https://codepen.io/irinainina/pen/wvJQWYR)
