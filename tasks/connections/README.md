# Final project

Welcome to the last level of the education journey. We hope this training lesson will enhance and
strengthen your knowledge and skills to design application structure and use entire framework power
solving the issues.

This project is intended for individual performance using the real one-for-all server. You can check
out your colleagues with their progress and be faster and more productive, because everyone should
have the same functionality.

> [!NOTE]
> Application aims to improve your technical skills. You are not limited in appearance, the main
> thing is for all features to be implemented and maximum user-friendly! It means, you have to
> **come up with yours design** of the app!

## General point

Single server provides sharing data and all students can interact with it reading and writing other
data. Each student's frontend project must be **identical in functionality** and any student opening
another student's project should have the same capabilities.

## Limitations

- all users are located in different timezones. Server keeps date and time
  in [UNIX timestamp](https://www.unixtimestamp.com/) format (as number), but you have care about
  appropriate timezone for everyone.
- server does not contain sufficient protection, for learning purpose we cut cumbersome redundant
  processes in order to focus on crucial features. Do not try to break it but inform us if you find
  critical defects.
- all transmitted data is **public** including personal email and messages. Do not use any sensitive
  data.
- server may have restrictions or limitations in data response if DB contains a lot of records. We
  are sincerely asking you to use it only to make sure the application works but do not overuse it
  for fun.

------

# Angular Application

The initial application can be generated by `@angular/cli`, it provides the latest version of
framework. Also we recommend to use standalone approach, although it is not widely used in the IT
production world in 2023.

You can use additional package with visual components (to simplify and speed up the development):

- [Angular Material](https://material.angular.io/)
- [NGX Bootstrap](https://valor-software.com/ngx-bootstrap/#/documentation)
- [NG Bootstrap](https://ng-bootstrap.github.io/#/home)
- [PrimeNG](https://primeng.org/installation)

You also need [NgRx](https://ngrx.io/guide/store). Using other helpful packages is prohibited!

## Milestone 1. Registration

**Score:** 130

Before user be accessed it should be saved in the system.
Registration page should be on specific routing `/signup`.

User have to be redirected to the [Sign In](#milestone-2-login) page after successful registration.

### Visualization

Page consist of:

**reactive form** with:

- first name field; It could be any of letters or spaces;
- email field. With validation for the email type;
- password field. With validation: minimum 8 symbols, 1 capital letter, 1 digit and 1 special
  symbol.

**submit button**  
Triggers the process of registration. Any errors during the registration should be displayed to let
use know about the problem.

**link to Sign In page**  
If user already have an account he is able to login.

### Endpoint

> `POST` https://5mbpeycgg1.execute-api.eu-central-1.amazonaws.com/registration

#### Request body

| Parameter  | Type     | Description            |
|------------|----------|------------------------|
| `email`    | `string` | email address of user  |
| `name`     | `string` | first name             |
| `password` | `string` | authorization password |

#### Response

_status code_ **201**

#### Exception

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Parameters \"email\", \"name\" and \"password\" are required"
}
```

###### User already exists in the platform

_status code_ **400**

```json
{
  "type": "PrimaryDuplicationException",
  "message": "User {email} already exists"
}
```

## Milestone 2. Login

**Score:** 100

If user with certain email was signed up, he can enter the system using login form.
It should be **default page** if user is not authenticated yet!

As a result of http-request application accept `token` and `uid` value to use it for further
http-requests.

> [!IMPORTANT]
> If authorization was made at other tab or other browser and new token was generated, the new token
> remains primary and old token will no longer valid!

Processing the successful response the value `token`, `uid` supposed to be persisted in browser's
local storage to use it in interceptors for all http-requests.

> User is considered as authorized if `token`, `uid` and `email` are persisted in `localStorage`.

Login page should be on specific routing `/signin`.

### Visualization

Page consist of:

**reactive form**  with:

- email
- password

**submit button**  
Triggers the process of authorization. Any errors during the registration should be displayed to let
use know about the problem.

**link to Sign Up page**  
If user does not have account yet.

### Endpoint

> `POST` https://uoq2b5pfmd.execute-api.eu-central-1.amazonaws.com/login

#### Request body

| Parameter  | Type     | Description            |
|------------|----------|------------------------|
| `email`    | `string` | email address of user  |
| `password` | `string` | authorization password |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "token": "string",
  "uid": "string"
}
```

#### Exceptions

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Parameters \"email\" and \"password\" are required."
}
```

###### User is not found

_status code_ **400**

```json
{
  "type": "NotFoundException",
  "message": "Email and/or password doesn't exist in the system."
}
```

## Milestone 3. Profile

**Score:** 80

Information on this page should be loaded **only once** when user visit this page first
time.

### Visualization

Page with certain routing `/profile` should contain:

- user id
- email address
- human-readable profile creation time
- user name

### Endpoint

> `GET` https://cinqj0r16e.execute-api.eu-central-1.amazonaws.com/profile

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "email": {
    "S": "string"
  },
  "name": {
    "S": "string"
  },
  "uid": {
    "S": "string"
  },
  "createdAt": {
    "S": "string"
    // unix timestamp in milliseconds
  }
}
```

#### Exceptions

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### User is not found

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "User was not found"
}
```


## Milestone 4. Profile updating

**Score:** 80

User can change and save his name. Application **should not** perform _get_ http-request `/profile`
again to retrieve saved data, if _put_ http-request succeed the data from the form is being
persisted in store and is used on Profile page instantly.

### Visualization

The button _Edit_ should be present on the page. Clicking on the button field `name` becomes
editable, _Save_ button appears to save new data on the server via http-request, _Cancel_ button
appears to revert back state to static form without modifications.

Form field `name` should obey the same validation rules as on Registration page.

### Endpoint

> `PUT` https://ce3k5xi22m.execute-api.eu-central-1.amazonaws.com/profile

Edit profile data of current user.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request body

| Property | Type     | Description   |
|----------|----------|---------------|
| `name`   | `string` | new user name |

#### Response

_status code_ **201**

#### Exceptions

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "You have to pass \"name\" field."
}
```

###### User cannot be found by passed parameters

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "User was not found. Check passed identificators."
}
```

## Milestone 5. Logout

**Score:** 50

User can terminate current session. Successful sign out process removes token for
http-request and application should wipe out all relative browser
data (`localStorage` | `sessionStorage` | `cookies`).

If action succeed user supposed to be redirected into [Login page](#milestone-2-login).

### Visualization

Special button `Logout` should be places on the [Profile page](#milestone-3-profile) in the top
right corner.
Button can be pressed once and button should be disabled until previous http-request is completed.

### Endpoint

> `DELETE` https://ie1zpdr086.execute-api.eu-central-1.amazonaws.com/logout

Removes session data for the user.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Response

_status code_ **200**

#### Exceptions

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Passed token is invalid

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Current session token is not valid."
}
```

## Milestone 6. People & Groups

**Score:** 220

The **default page** for authorized user should be the one without extra path (root routing).
Page is split into 2 vertical sections.
Left side is [Group section](#milestone-61-group-list).
Right side is [People section](#milestone-62-people-list).

> [!WARNING]
> Please, do not use any timers or intervals to update Group or People list! Only manual triggers
> are allowed.

## Milestone 6.1. Group list

**Score:** 120

Each of users can observe all available groups to broadcast messages. There is no private groups!
Also, user can create new one that will be visible for all other users.

### Visualization

Left half of the primary page consist of:

**_Update_ button**  
_Update_ button refreshes the group list by sending http-request and renders obtained list.

User can update the list no more than once a minute! Countdown must be present near the _Update_
button till the next update is possible. If time is out countdown disappears.
This state should be preserved even after transition to other pages and back.

**_Create_ button**  
_Create_ button opens modal window with a reactive form where user can enter `name`. Using
endpoint (below) application creates new group and append it into the list **without** retrieving
all group list with http-request again.

Form validation:

- `name` is not more than 30 symbols;
- `name` contains only letters, digits or spaces;

**List of groups**  
Simple list with **clickable items as a link** and extra delete button at the right of the name for
the groups were created by current user.

Clicking on item user is redirected to dedicated page with routing `/group/{:groupID}`

Confirmation modal window appears after clicking on delete group icon. If confirmation was accepted
using http-request the group is deleted and group is being removed from the list **without**
obtaining all group list with http-request again.

_rough example of group list_:  
`---------------------------------`  
`|` Someone's Group name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`---------------------------------`  
`|` My Group
name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10006; `|`  
`---------------------------------`  
`|` Someone's Group name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`---------------------------------`

### Endpoint

> `GET` https://n4dyyox9g9.execute-api.eu-central-1.amazonaws.com/groups/list

Retrieves list of available groups which can be used to broadcast messages.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "Count": "number",
  "Items": [
    {
      "id": {
        "S": "string"
      },
      "name": {
        "S": "string"
      },
      "createdAt": {
        "S": "string"
        // unix timestamp
      }
    }
    // ... another object in the same format
  ]
}
```

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

-----


> `POST` https://0j9gdnzdpd.execute-api.eu-central-1.amazonaws.com/groups/create

Creates new group with specific name. Owner will be able to delete created group.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request body

| Property | Type     | Description    |
|----------|----------|----------------|
| `name`   | `string` | new group name |

#### Response

_status code_ **201**  
_json_ format

```json
{
  "groupID": "y5kse1rcgh"
}
```

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Parameter \"name\" should define conversation name."
}
```

-----

> `DELETE` https://7yt5fzdh2f.execute-api.eu-central-1.amazonaws.com/groups/delete?groupID={:groupID}

Deletes group by owner.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request query

| Parameter | Type     | Description             |
|-----------|----------|-------------------------|
| `groupID` | `string` | unique group identifier |

#### Response

_status code_ **200**

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Query string should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "\"groupID\" parameter should be in query list."
}
```

###### Group does not exist

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "Group with id \"${groupID}\" does not exist or was removed before."
}
```

## Milestone 6.2. People list

**Score:** 100

User can observe all list of registered participants and make the individual conversation with any
of them.

There are 2 endpoints:

_/users_  
Retrieves list of all registered participants. This list should be rendered excluding myself.

_/conversations/list_  
Retrieves list of active individual conversations with unique id. This list used to

### Visualization

Right half of the primary page consist of:

**_Update_ button**  
_Update_ button refreshes the people list by sending http-request and renders obtained list.

User can update the list no more than once a minute! Countdown must be present near the _Update_
button till the next update is possible. If time is out countdown disappears.
This state should be preserved even after transition to other pages and countdown

**List of people**  
Simple list with **clickable items as a link** of all members. If user has the conversation with
someone
created earlier, its list item should have different background light color.

Clicking on item user is redirected to dedicated page with
routing `/conversation/{:conversationID}`.

> [!WARNING] Technically application should create
> conversation via special http-request (below) before user is redirected to the dialog page if
> there is no
> already created conversation with unique id. If any errors occur during conversation creation user
> have to see toast danger message and redirection is
> canceled.

_rough example of people list_:  
`-----------------------`  
`|`
Sofía&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`-----------------------`  
`|`
Nicolás&nbsp;&nbsp;*************&nbsp; `|`  
`-----------------------`  
`|`
Mateo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`-----------------------`

### Endpoint

> `GET` https://kxqohlqmw6.execute-api.eu-central-1.amazonaws.com/users

Retrieves list of participants.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "Count": "number",
  "Items": [
    {
      "name": {
        "S": "string"
      },
      "uid": {
        "S": "string"
      }
    }
    // ... another object in the same format
  ]
}
```

#### Exceptions

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

-----

> `GET` https://n4r8c9u9eh.execute-api.eu-central-1.amazonaws.com/conversations/list

Retrieves list of active conversations of current user.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "Count": "number",
  "Items": [
    {
      "id": {
        "S": "string"
      },
      "companionID": {
        "S": "string"
      }
    }
    // ... another object in the same format
  ]
}
```

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

## Milestone 7. Group dialog

Before user can send any message in the public dialog the channel have to be created as mentioned
above.

### Visualization

Page with dedicated routing `/group/{:groupID}` consist of:

**Return back button**  
It should be the link(!) to navigate to primary page.

**_Update_ button**  
Clicking on _Update_ button the application should send http-request, process the response and
display new messages if they are.

This button can be pressed once a minute and _Update_ button should be disabled! Countdown is
supposed to indicate how much time left. Countdown disappears when time is out.

**_Delete_ button**  
Visible only for group owner.
Clicking on this button the group will be deleted and people will not be able to sent messages.

**Area with messages**  
Section displays all messages. Own messages should be on the right side. The messages from other
people should be aligned to the left side.

Each message item with your appearance is supposed to consist of:

- date/time the message was created
- user name
- message text

`-----------------------------`  
`|` 2023/10/17 3:54
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`|` John
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`|` My new message
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`-----------------------------`  
`|` &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2023/10/17 5:18 `|`  
`|`
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Me `|`  
`|` &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; My new
message `|`  
`-----------------------------`

**Form field for new message**  
Simple form field with _text_ type for new message + _Send_ button to trigger process.

### Technical solution

All received message data should be saved in the NgRx store in some way in order to not load ald
messages again if user navigates between pages and returns back to the channel until browser is
reloaded.

Corresponding endpoint can receive optional query parameter `since`.
If parameter is omitted - all messages are responded. That option should be when user visit group
first time.  
Every subsequent group update the `since` parameter supposed to be set to the last received message
unix time
and only new messages (after that time) will be responded. Application should get only new messages
and append them to the list.

### Endpoint

> `GET` https://7q6pam6743.execute-api.eu-central-1.amazonaws.com/groups/read?groupID={:groupID}&since={:since}

Retrieves messages of provided group.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request query

| Parameter | Type     | Description                               |
|-----------|----------|-------------------------------------------|
| `groupID` | `string` | unique group identifier                   |
| `since`   | `number` | (Optional) unix timestamp in milliseconds |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "Count": "number",
  "Items": [
    {
      "authorID": {
        "S": "string"
      },
      "message": {
        "S": "string"
      },
      "createdAt": {
        "S": "string"
        // unix timestamp
      }
    }
    // ... other objects in the same format
  ]
}
```

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Query string should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "\"groupID\" parameter should be in query list."
}
```

###### Group does not exist

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "Group with id \"{groupID}\" does not exist or was removed before."
}
```

-----

> `POST` https://9ixpng57y3.execute-api.eu-central-1.amazonaws.com/groups/append

Sends new message into the group channel.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request body

| Property  | Type     | Description           |
|-----------|----------|-----------------------|
| `groupID` | `string` | group identifier      |
| `message` | `string` | personal message text | 

#### Response

_status code_ **201**

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidPostData",
  "message": "Post data should contain valid \"groupID\", \"message\" parameters."
}
```

###### Group does not exist

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "Group with id \"{groupID}\" does not exist or was removed before."
}
```

## Milestone 8. Person conversation

Before user can send any message to other participant the conversation have to be created as
mentioned above.

### Visualization

Page with dedicated routing `/conversation/{:conversationID}` consist of:

**Return back button**  
It should be the link(!) to navigate to primary page.

**_Update_ button**  
Clicking on _Update_ button the application should send http-request, process the response and
display new messages if they are.

This button can be pressed once a minute and _Update_ button should be disabled! Countdown is
supposed to indicate how much time left. Countdown disappears when time is out.

**_Delete_ button**  
Clicking on this button the conversation will be deleted and the partner will not be able to sent
messages until conversation is created again. All messages are being deleted.

**Area with messages**  
Section displays all messages. Own messages should be on the right side. The messages from other
people should be aligned to the left side.

Each message item with your appearance is supposed to consist of:

- date/time the message was created
- user name
- message text

`-----------------------------`  
`|` 2023/10/17 3:54
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`|` John
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`|` My new message
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `|`  
`-----------------------------`  
`|` &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2023/10/17 5:18 `|`  
`|`
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Me `|`  
`|` &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; My new
message `|`  
`-----------------------------`

**Form field for new message**  
Simple form field with _text_ type for new message + _Send_ button to trigger process.

### Technical solution

All received message data should be saved in the NgRx store in some way in order to not load ald
messages again if user navigates between pages and returns back to the conversation until browser is
reloaded.

Corresponding endpoint can receive optional query parameter `since`.
If parameter is omitted - all messages are responded. That option should be when user open
conversation first time.  
Every subsequent conversation update the `since` parameter supposed to be set to the last received
message unix time
and only new messages (after that time) will be responded. Application should get only new messages
and append them to the list.

### Endpoint

> `GET` https://68yqrljhs3.execute-api.eu-central-1.amazonaws.com/conversations/read?conversationID=46f6aq96dzs&since=1699833375896

Received messages of provided conversation.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request query

| Parameter        | Type     | Description                               |
|------------------|----------|-------------------------------------------|
| `conversationID` | `string` | unique conversation identifier            |
| `since`          | `number` | (Optional) unix timestamp in milliseconds |

#### Response

_status code_ **200**  
_json_ format

```json
{
  "Count": "number",
  "Items": [
    {
      "authorID": {
        "S": "string"
      },
      "message": {
        "S": "string"
      },
      "createdAt": {
        "S": "string"
        // unix timestamp
      }
    }
    // ... other objects in the same format
  ]
}
```

### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Query string should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "\"conversationID\" parameter should be in query list."
}
```

###### Conversation does not exist

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "Conversation with id \"{conversationID}\" does not exist or was deleted before."
}
```

-----

> `POST` https://ezsl9q7d2d.execute-api.eu-central-1.amazonaws.com/conversations/append

Sends new message to the partner.

#### Request headers

| Header          | Type     | Description                                                                               |
|-----------------|----------|-------------------------------------------------------------------------------------------|
| `rs-uid`        | `string` | user identifier received after successful authentication                                  |
| `rs-email`      | `string` | user email                                                                                |
| `Authorization` | `string` | `Bearer <TOKEN>`, where `<TOKEN>` is token value received after successful authentication |

#### Request body

| Property         | Type     | Description             |
|------------------|----------|-------------------------|
| `conversationID` | `string` | conversation identifier |
| `message`        | `string` | personal message text   | 

#### Response

_status code_ **201**

#### Exception

###### Have not passed required headers in http-request

_status code_ **400**

```json
{
  "type": "InvalidUserDataException",
  "message": "Header should contain \"rs-uid\", \"rs-email\" and \"Authorization\" parameters."
}
```

###### Have not passed valid Authorization header parameter

_status code_ **400**

```json
{
  "type": "InvalidTokenException",
  "message": "Header should contain \"Authorization\" parameter with Bearer code."
}
```

###### Sent form data is corrupted

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid multipart/form-data request"
}
```

###### Format of form data is unknown or cannot be read

_status code_ **400**

```json
{
  "type": "InvalidFormDataException",
  "message": "Invalid post data"
}
```

###### Form data should contain required parameters

_status code_ **400**

```json
{
  "type": "InvalidPostData",
  "message": "Post data should contain valid \"conversationID\", \"message\" parameters."
}
```

###### Conversation does not exist

_status code_ **400**

```json
{
  "type": "InvalidIDException",
  "message": "Conversation with id \"{conversationID}\" does not exist or was deleted before."
}
```

## Milestone 9. 404 page

**Score:** 50

For the occasion when user tries to open unknown page he should be informed about it with the
appropriate message.
Page url should not be changed.

Page is supposed to have:

- link to the primary page (depending on user authorization status)
- message about wrong url

# Examination

Each milestone has relative score.

### Url navigation

#### Guest

Pages available only for users before authorization. That pages are not available for users after
successful authorization.

_`/signup` (registration)_  
Page to create new account.

_`/signin` (login)_  
Page where user can enter email and password to enter the platform. **Default page** for
non-authorized users.

#### Member

That pages allowed only for authorized users. Should be guarded.

_`/` (main page)_  
Page with group list and people list.**Default page** for authorized users.

_`/profile` (user profile)_  
User's information with the ability to edit it.

_`/group/{:groupID}` (broadcast page)_  
`:groupID` is unique group identifier  
Page where user can send message to all participants.

_`/conversation/{:conversationID}` (person dialog)_  
`:conversationID` is unique user identifier to speak with  
Page where user can write personal messages directly.

_`/logout` (to sign out)_  
That is not a visual page. It is just endpoint to clear up token for user and return back into
authorization page.
