# JavaScript для верстальщика

## 1. Метод поиска querySelector
 
JavaScript отвечает за динамику веб-страниц, позволяет им реагировать на действия пользователя. Но для того, чтобы JavaScript мог изменить состояние элемента на странице, вначале ему необходимо этот элемент найти.

Метод поиска элементов в JavaScript  называется `querySelector`.
Его синтаксис:

```javascript
document.querySelector('.logo img');
```

Здесь:
- `document` – где ищем (по всему документу);
- `querySelector` – метод поиска элементов;
- `.logo img` – css-селектор


Метод `querySelector` позволяет найти любой элемент веб-страницы, отображенный в html-разметке: тег, класс, id и их сочетания.

**Пример**. Используя метод `querySelector` найдём в документе элемент с классом `logo`

```javascript
document.querySelector('.logo');
```

**Пример**.  Найдём изображение внутри элемента с классом `logo`,

```javascript
document.querySelector('.logo img');
```


## 2. Метод поиска querySelectorAll

Метод `querySelector` ищет первый элемент на странице. Если нужно найти все элементы, отвечающие определённому css-селектору, используем метод `querySelectorAll`.
Методы поиска `querySelector` и `querySelectorAll` позволяют решить около 95% задач поиска элемента на веб-странице и охватывают практически все типовые случаи.

**Пример**. Найдём все изображения внутри элемента с классом `slider`, используя метод поиска `querySelectorAll`.

```javascript
document.querySelectorAll('.slider img');
```


## 3. Объявление и создание переменных

Чтобы сохранить результаты поиска и иметь возможность обращаться к ним в дальнейшем, создают переменные.
Процесс создания переменной выглядит примерно так:

```javascript
const logo = document.querySelector('.logo img');
```

Здесь:
- `const` – объявление переменной;
- `logo` – имя переменной;
- `=`  – оператор присвоения.

Правая часть выражения нам уже известна и понятна.

Выбирая имена переменных, старайтесь делать их осмысленным и понятным.

Имена переменных в JavaScript могут содержать буквы, цифры, знак подчёркивания. Для них даже можно использовать русские буквы, но устоявшейся практикой являются всё же английские имена переменных.

Объявление всех используемых переменных принято выносить в начало программы.

**Пример**. Используя метод `querySelector`, найдём первое изображение на странице, результат поиска присвоим переменной с именем firstImage.

```javascript
const firstImage = document.querySelector('img');
```


## 4. Ограничиваем область поиска // как искать в определённой области документа

Обычно на веб-странице находятся сотни и тысячи различных элементов. Если известно, что интересующие нас элементы находятся внутри определённой области на странице, поиск осуществляем внутри неё.

Например, если нужные нам элементы находятся внутри главного меню, то разумно и правильно будет найти в документе меню, присвоить результат поиска переменной и дальше уже её использовать в качестве области поиска:

```javascript
const nav = document.querySelector('nav');
const logo = nav.querySelector('.logo img');
```

## 5. Метод отлова событий 

Событие – это сигнал от браузера о том, что что-то произошло.  
Существует много видов событий. Перечислим некоторые из них (запоминать события не нужно).

**События мыши**:
- `click` – клик
- `contextmenu` – клик правой кнопкой мыши
- `dbclick` – двойной клик
- `mouseover` – навели курсор
- `mouseout` – убрали курсор
- `mousedown` и `mouseup` – кнопку мыши нажали или отжали
- `mousemove` – движение мыши

**Клавиатурные события**:
- `keydown` – кнопка нажата
- `keyup` – кнопка отжата
- `keypress` – кнопка удерживается

**События на элементах управления**:
- `focus` – элемент в фокусе, например, пользователь нажимает на input или в текстовое поле вводит текст
- `blur` – убрали мышку из фокуса
- `reset` – форма очищена
- `submit` – форма отправлена

И все эти события можно отлавливать.

Метод `addEventListener` отлавливает событие элемента и выполняет переданную функцию.
Его синтаксис:

```javascript
document.addEventListener('click', () => {
  // code
});
```

- `document` – область в которой отлавливаем события;
- `addEventListener` – метод отлова событий;
- `click` – какое именно событие отлавливаем ('клик');
- `() => {}` – функция, которая будет выполнена в тот момент, когда событие произойдёт.   

**Пример**.  Напишем код, который будет выводить в консоль сообщения «Какое чудесное фото» при клике  по изображению с классом `pretty-image`.

```javascript
const image = document.querySelector('.pretty-image');
image.addEventListener('click', () => {
  console.log('Какое чудесное фото');
});
```

## 6. Метод `classList`

Мы научились находить любой элемент на странице, замечать, что с этим элементом что-то происходит и даже выводить результаты своих наблюдений в консоль браузера. Единственный недостаток: информация в консоли предназначена в первую очередь для разработчиков. Попробуем сделать её доступной и для рядовых пользователей тоже. Для этого мы будем использовать метод `classList`.

Как подсказывает название метода, он предназначен для работы с классами и только с классами. Зато с ними он умеет делать всё.  
Метод `classList` является идеальным для работы с классами. Он поддерживается всеми современными браузерами.

- `element.classList.add('class');` - добавляет элементу класс;
- `element.classList.remove('class');` - удаляет класс;
- `element.classList.toggle('class');` - переключает класс: добавляет, если класса нет, и удаляет, если он есть.

С переключения классов мы и начнём, но вначале одно важное замечание.

Так как метод `classList` работает только с классами, то в кавычках внутри может находиться только название класса. И вот перед этим названием класса **точка не ставится никогда**. Эту ошибку часто совершают начинающие разработчики.

**Пример**. Напишем программу, которая будет скрывать и отображать изображение с классом  `pretty-image` при кликах по нему мышкой.

1. В css пропишем правило для класса `pretty-image` указав ему свойство opacity: 0;
```css
.image-hide {
  opacity: 0;
  transition: .3s;
}
```

2. В js используем метод `classList.toggle`

```javascript
const image = document.querySelector('.pretty-image');
image.addEventListener('click', () => {
  image.classList.toggle('image-hide');
});
```

Метод `classList` позволяет не только скрыть элемент, но и сделать с ним многое другое: изменить размер, повернуть, переместить и т.д. Всё зависит от css-правил для нового класса, который добавляем элементу.

## 7. Отмена события по умолчанию

Если элемент имеет событие по умолчанию, а это относится к ссылкам и к элементам форм, данное событие следует отменить.

Чтобы понять как это можно сделать, посмотрите на код:

```javascript
const logo = document.querySelector('a.logo');
logo.addEventListener('click', (event) => {
    event.preventDefault();
    console.log('Это моя аватарка');
});
```

Большая часть кода нам известна, но появилось два изменения:

- `function(event)` – аргумент event – любое событие;
- `event.preventDefault();` – оно отменено.


## 8. Если элемент недоступен // classList.add и classList.remove

Не всегда желательно и возможно кликать по самому элементу, чтобы его показать или скрыть. Часто стоит задача показывать или скрывать элемент кликом по кнопке, не являющейся частью данного элемента.

**Пример**. Научимся отображать и скрывать изображение на странице кликом по кнопкам «Показать» и «Скрыть».

1. Используя метод поиска `querySelector`, найдём в документе кнопки с классами `show` и `hide` и изображение с классом `.pretty-image,` присвоим результат поиска переменным `show`, `hide` и `image`.

```javascript
const show = document.querySelector('.show');
const hide = document.querySelector('.hide');
const image = document.querySelector('.pretty-image');
```

2.  Используем метод `addEventListener` для отлова кликов по кнопкам `show` и `hide` и выполнения переданной функции. 

```javascript
show.addEventListener('click', () => {});
hide.addEventListener('click', () => {});
```

3.  Для кликов по кнопке `hide` в качестве функции укажем добавление класса `image-hide` к элементу `image`. Добавить класс позволяет метод `classList.add`

```javascript
hide.addEventListener('click', () => {
    image.classList.add('image-hide');
});
```

4. Для кликов по кнопке `show` в качестве функции укажем удаление класса `image-hide` у элемента `image`. Удалить класс позволяет метод `classList.remove`

```javascript
show.addEventListener('click', () => {
    image.classList.remove('image-hide');
});
```

## 9. Управление элементом с клавиатуры // window, event.code

Существует возможность управлять поведением элемента нажимая на клавиши на клавиатуре.
Вот как будет выглядеть код скрывающий элемент с классом `.pretty-image` при нажатии на клавишу пробел:

```javascript
const image = document.querySelector('.pretty-image');
window.addEventListener('keydown', (event) => {
  if(event.code === 'Space') {
    image.classList.add('image-hide');
  }
});
```

Большая часть кода нам уже знакома, но появились некоторые новые моменты. К ним относятся:

- глобальный объект `window`. Мы уже знакомы с глобальным объектом `document`, который содержит весь код страницы и все его элементы.  
`window` – это окно браузера, в котором данный документ отображается;
- событие `keydown`. Несложно догадаться, что речь идёт о нажатии на клавишу;
- условие `if(event.code === 'Space')` выполняется, если нажата клавиша пробле, код которой равен 'Space'. 

Узнать код клавиши можно на странице https://keycode.info/. Перейдите по ссылке, нажмите на клавишу и увидите её код. Оператор `===` означает «равно», тогда как одинарное `=` это оператор присвоения.

**Задание**. Проверьте, усвоили ли вы материал. Напишите код, который будет при клике на клавишу `Enter` попеременно скрывать и отображать на странице изображение с классом `.pretty-image`.