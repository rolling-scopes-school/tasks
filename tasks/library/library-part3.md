## Library#3

Добавление функционала при помощи JavaScript

| Start task | Deadline task        | Start cross-check | Deadline cross-check |
| ---------- | -------------------- | ----------------- | -------------------- |
| 14.08.2023 | 11.09.2023 00:00 UTC | 11.09.2023        | 15.09.2023 03:59 UTC |

- [Описание и требования задания](library.md)

В этой части задания необходимо добавить в свёрстанную на предыдущих этапах веб-страницу функционал разбитый на 4 этапа.

#### Этап 1: Пользователь не зарегистрирован

- Карусель в виде слайдера в блоке `About` с фиксированным началом и концом: На большом экране будет доступно 3 перехода. При нажатии на кнопку, происходит плавное замещение одной картинки другой (слепок. Переход из крайнего левого состояния в крайнее правое происходит только через перелистывание всех элементов посередине, и в обратную сторону. Тоже касается и ширины экранов для планшетов, только теперь кнопок будет 5. А в крайних положениях, стрелки соответствующей стороны будут становиться неактивными.

- "Слайдер" в виде затемнения/проявления (fade in / fade out) в блоке `Favorites`: все 4 карточки с книгами будут плавно затухать, а затем плавно появляться следующие. Анимация может быть прервана следующим нажатием на кнопку выбора поры года.
  Также допускается реализация данного пункта табами.

#### Этап 2: Пользователь на этапе регистрации

- Нажатие на кнопку `Register` или `Sign Up` открывает модальное окно регистрации. После регистрации, у пользователя изменится иконка пользователя на заглавные буквы имени. Все данные (в том числе и пароль!) сохраняются в localStorage.
- В разделе `Digital Library Cards` станет доступна проверка карты пользователя. Если введенные имя и номер карты совпадают с данными пользователя, то отображается панель с информацией, вместо кнопки `check the card` на 10 секунд. После чего кнопка возвращается в прежнее состояние.

#### Этап 3: Пользователь на этапе входа в учетную запись после регистрации

- Нажатие на кнопку `Log In` или `Buy` открывает модальное окно авторизации. После этого станут доступны манипуляции с профилем, а также каждая авторизация будет влиять на счетчик визитов.

#### Этап 4: Пользователь после входа в учетную запись

- Доступно окно профиля, возможность купить абонемент, отображение информации в `Digital Library Cards`.

Материалы:

- [Макет в figma](https://www.figma.com/file/SGY7eOpXC1xBddFNsb72o7/%D0%91%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0-stage0)

## Порядок работы

1. Задание выполняется в приватном репозитории школы.
2. От ветки `library` создайте ветку `library-part3` в ней уже будет находиться папка `library` с файлами проекта
3. Продолжите выполнение задания.
4. Проверьте соответствие вашей работы [Требованиям к функционалу](#требования-к-функционалу)
5. Cамостоятельно оцените свою работу согласно предложенным [Критериям оценки](#критерии-оценки)
6. Самооценку своей работы выведите в консоль браузера.
7. Создайте и замержите Pull Request из ветки `library-part3` в ветку `library`.
   Название Pull Request произвольное. Описывать данный Pull Request нет необходимости.
8. После окончания кросс-чека предыдущей части задания создайте и замержите Pull Request из ветки `library` в ветку `gh-pages`.
   Название Pull Request произвольное. Описывать данный Pull Request нет необходимости.
   Через 10-15 минут после мержа, иногда больше, деплой вашей работы будет доступен по ссылке
   `https://rolling-scopes-school.github.io/GITHUB-USERNAME-JSFEPRESCHOOL2023Q2/library/`
   в которой вместо GITHUB-USERNAME укажите свой никнейм на сайте GitHub
9. После завершения работы отредактируйте Pull Request из ветки `library` в ветку `main`, дополнив его функционалом третьей части задания.
   Мержить данный Pull Request не нужно.
10. Ссылку на деплой засабмитьте в [rs app](https://app.rs.school/) раздел "Cross-Check Submit"
11. После дедлайна таска стартует кросс-чек. Продолжительность кросс-чека три дня. Для получения балла за таск необходимо проверить все присланные на проверку работы и засабмитить в [rs app](https://app.rs.school/) результат проверки.

## Требования к функционалу тз

### Этап 1: Пользователь не зарегистрирован

- **Ограниченная карусель в блоке `About`**
  1. Карусель реагирует на нажатие кнопок (кнопки под каруселью и стрелочки слева и справа в мобильной версии) и происходит анимация перелистывания. +15
  2. На экране шириной 1440px проверяем, чтобы было доступно 2 других скрытых картинки. При каждом нажатии выезжает следующая, и так до границ справа и слева. +2
  3. Выделенная кнопка под каруселью (имеется ввиду кнопка соответствующая активному слайду и которая имеет коричневый цвет) - неактивная.
  4. Если анимация карусели не успела завершиться, при этом нажата была следующая кнопка, то картинка не должна зависнуть в промежуточном состоянии. +2
  5. На экране шириной 768px проверяем, чтобы было доступно 4 других скрытых картинки. Для этого меняем разрешение и перезагружаем страницу. Теперь доступных перемещений становится 5. +2
  6. Неактивными становятся не только выделенные кнопки, но и боковые кнопки-стрелки, при достижении соответствующей им границы карусели.
- **Слайдер в блоке `Favorites`**
  1. "Слайдер" реагирует на нажатие кнопок панели навигации и происходит анимация затухания и проявления. +15
  2. На любой ширине экрана все 4 карточки с книгами одновременно будут плавно затухать, а затем плавно проявляться следующие. +2
  3. Анимация может быть прервана следующим нажатием на кнопку выбора поры года, но при этом анимация не должна застывать в промежуточном состоянии. Если анимация не была прервана следующим нажатием кнопки, то она должна отрабатывать до конца. +2
  4. Во время анимаций высота блока `Favorites` не должна меняться. +2
  5. ❗Панель навигации "слайдера" сделана по технологии "sticky" для разрешений с одним рядом книг (768px и меньше), т.е. опускается вниз вместе со скроллом страницы, прилипая к верхней части экрана, в рамках блока `Favorites`. +2
- **До регистрации**
  1. Нажатие на кнопку `Check the card` ни к чему не приведёт.
- **До авторизации**
  1. Иконка юзера в хедере отображается в виде силуэта.
  2. В блоке `Favorites` все кнопки должны иметь имя `Buy`, а не `Own`. +2

### Этап 2: Пользователь на этапе регистрации

- **Меню авторизации при нажатии на иконку пользователя**
  1. Нажатие на иконку пользователя в хедере открывает меню, которое должно оказаться под иконкой таким образом, что правый верхний угол меню находится в той же точке, что и нижний правый угол контейнера с иконкой в хедере. Меню под иконкой. +2
  2. На разрешении 768px, при открытом бургер-меню, оно закрывается и открывается меню авторизации. +2
  3. То же верно и в обратную сторону, кнопка бургер-меню должна быть доступна при открытом меню авторизации. +2
  4. Нажатие на любую область или элемент вне меню приводят к закрытию меню авторизации. +2
- **Модальное окно `REGISTER`**
  1. Дизайн модального окна соответствует макету. +15 (позже появятся пункты оценки по каждому элементу в отдельности).
  2. При нажатии на кнопку Register в открытом меню авторизации появляется модальное окно `REGISTER`, где есть поля `First name`, `Last name`, `E-mail` и `Password`. +2
  3. При нажатии кнопки `Sign Up` в блоке `Digital Library Cards` также появляется модальное окно `REGISTER`. +2
  4. Окно центрировано, а область вокруг затемнена (насколько затемнена - не имеет значения). +2
  5. При нажатии на крестик в углу окна, или на затемнённую область вне этого окна, оно закрывается. +2
  6. В данном случае, ограничения по полям - все поля должны быть не пустыми. +2
  7. Пароль должен быть не короче 8 символов. +2
  8. В поле `E-mail` должна быть валидация типа email. +2
- **Окончание регистрации**
  1. Данные сохраняются в хранилище **localStorage**, в том числе и пароль, хотя в реальной жизни так делать нельзя. +2
  2. Иконка пользователя меняется на заглавные буквы имени. +2
  3. Отображение страницы приходит в состояние после авторизации (этап 4). +2
  4. Будет сгенерирован девятизначный `Card Number` случайным образом в формате 16-ричного числа. +2
- **При наличии регистрации, но будучи не авторизованным**
  1. Блок `Digital Library Cards`. Если введённые имя и номер карты совпадают с данными пользователя, то отображается панель с информацией, вместо кнопки `Check the card` на 10 секунд. +2
  2. Там же после отображения информации, кнопка возвращается в прежнее состояние, а поля в форме сбрасываются. +2

### Этап 3: Пользователь на этапе входа в учётную запись после регистрации.

- **Модальное окно `LOGIN`**
  1. Дизайн модального окна соответствует макету. +15 (позже появятся пункты оценки по каждому элементу в отдельности).
  2. При нажатии на кнопку `Log In` появляется модальное окно `LOGIN`, где есть поля `E-mail or readers card` и `Password`. +2
  3. При нажатии кнопки `Log In` в блоке `Digital Library Cards` также появляется модальное окно `LOGIN`. +2
  4. Окно центрировано, а область вокруг затемнена (насколько затемнена - не имеет значения). +2
  5. При нажатии на крестик в углу окна, или на затемнённую область вне этого окна, оно закрывается. +2
  6. Для авторизации все поля должны быть не пустыми. +2
  7. Пароль должен быть не короче 8 символов. +2
- **Блок `Favorites`**
  1. Если пользователь ещё не вошёл в учётную запись, то при нажатии на любую кнопку `Buy` открывается модальное окно `LOGIN`. +2

### Этап 4: Пользователь после входа в учётную запись

- **Меню профиля при нажатии на иконку с инициалами пользователя**
  1. При наведении курсором на иконку пользователя должно отображаться полное имя пользователя (атрибут title). +2
  2. Нажатие на иконку пользователя в хедере открывает меню, которое должно оказаться под иконкой таким образом, что правый верхний угол меню находится в той же точке, что и нижний правый угол контейнера с иконкой в хедере. Меню под иконкой. +2
  3. На разрешении 768px при открытом бургер-меню, оно закрывается и открывается меню авторизации. +2
  4. То же верно и в обратную сторону, кнопка бургер-меню должна быть доступна. +2
  5. Нажатие на любую область или элемент вне меню приводят к закрытию меню профиля. +2
  6. ❗Вместо надписи Profile отображается девятизначный `Card Number`. Для `Card Number` можно использовать меньший шрифт чтобы надпись вместилась в контейнер, +2
  7. Нажатие на кнопку `My Profile` открывает модальное окно `MY PROFILE`. +2
  8. Нажатие на кнопку `Log Out` приводит к выходу пользователя из состояния авторизации, возвращаемся к этапу #1. +2
- **Модальное окно `MY PROFILE`**
  1. Дизайн модального окна соответствует макету. +15 (позже появятся пункты оценки по каждому элементу в отдельности).
  2. В случае если имя и фамилия слишком длинные и не влазят в блок то должен произойти перенос фамилии на следующую строку.
  3. Счетчик для Visits отображает, сколько раз пользователь проходил процесс авторизации, включая самый первый - регистрацию. +2
  4. Счетчик для Books отображает, сколько у пользователя книг находятся в состоянии `Own`. Значение варьируется 0-16. +2
  5. Рядом с Card Number есть кнопка, нажатие на которую копирует код карты клиента в буфер обмена. +2
  6. Окно центрировано, а область вокруг затемнена (насколько затемнена - не имеет значения). +2
  7. При нажатии на крестик в углу окна, или на затемненную область вне этого окна, оно закрывается. +2
- **Блок `Favorites`**
  1. При нажатии на любую кнопку `Buy`, еще до покупки абонемента, открывается модальное окно `BUY A LIBRARY CARD`. +2
  2. При нажатии на любую кнопку `Buy`, после покупки абонемента, меняет вид кнопки на неактивную `Own`, добавляя единицу к счетчику книг в профиле. +2
  3. Кроме того после нажатия обновляется не только счетчик, но и название книги должно отобразится в разделе `Rented Books`. Название формируется по принципу <название книги>, <автор книги>. В случае если название книги слишком длинное или список стал слишком большой список книг в блоке `Rented Books` становится скроллируемым (по необходимости горизонтально/ вертикально или оба скролла сразу) Тайтл `Rented Books` скроллироваться не должен +2
- **Модальное окно `BUY A LIBRARY CARD`**
  1. ❗Модальное окно нужно сделать шириной 640px. Будет это обрезка по 5px по бокам, или просто уменьшение длины с сохранением сетки - значения не имеет, хотя при правильной сеточной структуре, сделать это будет намного проще. +2
  1. Дизайн модального окна соответствует макету. +15 (позже появятся пункты оценки по каждому элементу в отдельности).
  1. При нажатии на крестик в углу окна, или на затемнённую область вне этого окна, оно закрывается. +2
  1. Для того, чтобы кнопка `Buy` была активна, все поля должны быть не пустыми. +2
  1. `Bank card number` должен содержать 16 цифр. С пробелами каждые 4 символа или нет - значения не имеет. +2
  1. `Expiration code` содержит 2 поля с ограничением в 2 цифры. +2
  1. CVC должен содержать 3 цифры. +2
  1. После удачного нажатия на кнопку `Buy`, окно закрывается, и больше мы к нему не возвращаемся.
- **Блок `Digital Library Cards`**
  1. При наличии авторизации вместо кнопки `Check the Card` будут отображаться данные пользователя и бейджи, как на дизайне `LibraryCard after login in account`. +2

## Критерии оценки

**Максимальная оценка за задание 200 баллов**

Баллы за пункты требований указаны в разделе [Требования к функционалу](#требования-к-функционалу)

Для удобства проверки выведите в консоль браузера самооценку своего проекта по пунктам с указанием баллов за каждый выполненный вами пункт.

## Как сабмитить задание

- Задание `Library#3` проверяется в ходе кросс-чека.
- После выдачи задания, но до наступления дедлайна зайдите в rs app https://app.rs.school/, выберите **Cross-Check: Submit**, в выпадающем списке выберите название задания, в поле **Solution URL** добавьте ссылку на задеплоенную страницу с вёрсткой, нажмите кнопку **Submit**.

## Рекомендации по сабмиту

- Засабмитить задание рекомендуется как можно раньше, как только в rs app появится такая возможность. После сабмита задание можно продолжать выполнять до самого дедлайна
- Так как проект выполняется в приватном репозитории, сабмитить ссылку на репозиторий или pull request нет смысла - проверяющий его не увидит. Приватный репозиторий школы видите только вы сами, админы курса, и увидят ваши менторы, когда они появятся
- Убедитесь, что задеплоенная вами ссылка открывается в режиме инкогнито браузера
- Сделайте скриншот засабмиченной ссылки и сохраняйте его у себя до старта кросс-чека. Если вам не придут работы на проверку, скриншот послужит доказательством, что вы вовремя засабмитили ссылку на работу. В таком случае вашу работу проверят в ходе апелляции

## Проверка задания Library#3

- форма для кросс-чека (Library#3): https://rolling-scopes-school.github.io/checklist/
- инструкция по проведению cross-check: https://docs.rs.school/#/cross-check-flow

## Материалы

- Document Object Model https://learn.javascript.ru/document
- Browser Events https://learn.javascript.ru/introduction-browser-events
- Вебинар Сергея Шаляпина 2022 Q1 Simple carousel example https://youtu.be/2xP-HahCtio
- Вебинар Сергея Шаляпина 17.10.2019 Swiper & Slider Examples (carousel live coding) https://youtu.be/rkz6LURkbBw
- LocalStorage на пальцах https://tproger.ru/articles/localstorage/
- LocalStorage (learn.javascript.ru) https://learn.javascript.ru/localstorage
